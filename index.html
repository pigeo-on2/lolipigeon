<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Primary Meta Tags -->
    <title>pigeon's space</title>
    <meta name="title" content="pigeon's space" />
    <meta name="description" content="pigeons fly high" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://lolipigeon.xyz/" />
    <meta property="og:title" content="pigeon's space" />
    <meta property="og:description" content="pigeons fly high" />
    <meta property="og:image" content="logo.jpg" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://lolipigeon.xyz/" />
    <meta property="twitter:title" content="pigeon's space" />
    <meta property="twitter:description" content="pigeons fly high" />
    <meta property="twitter:image" content="logo.jpg" />

    <meta name="theme-color" content="#ff70a6">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-grid">
        <div class="profile-card card">
            <div class="profile-title">
                <span class="profile-emoji" style="margin-right:0.5rem;">🕊️</span>
                <span class="profile-name-gradient">pigeon</span>
            </div>
            <div class="profile-desc">Rhythm Game Player & Developer</div>
            <div class="profile-social">
                <a id="discord-copy-btn" title="Discord" style="cursor:pointer;">💬</a>
                <a href="https://twitter.com/pigeo_on2" title="Twitter" target="_blank">🕊️</a>
            </div>
        </div>
        <div class="about-card card">
            <div class="card-title">About</div>
            <div class="card-content">Rhythm and Development<br>Python, C++, C#<br>AI, Security</div>
        </div>
        <div class="skills-card card">
            <div class="card-title">Languages</div>
            <ul>
                <li>🐍 Python</li>
                <li>⚡ C++</li>
                <li>🎮 C#</li>
            </ul>
        </div>
        <div class="interests-card card">
            <div class="card-title">Interests</div>
            <ul>
                <li>🤖 AI</li>
                <li>🔒 Security</li>
            </ul>
        </div>
        <div class="games-card card">
            <div class="card-title">Games</div>
            <div class="games-list">
                <div class="game-entry" style="align-items: flex-start;">
                    <span class="game-title" style="font-weight:700;">プロセカ</span>
                    <span class="game-detail">エンドマークに希望と涙を添えて AP</span>
                </div>
                <div class="game-entry" style="align-items: flex-start;">
                    <a href="https://chuni.xitora.cc/profile/lolipigeon" target="_blank" class="chunithm-link">
                        <span class="game-title" style="font-weight:700;">CHUNITHM</span>
                        <span class="game-detail">CLICK TO SEE RATING </span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <a href="minigames.html" class="minigame-float-btn">Minigames</a>
    <div id="toast" style="display:none;position:fixed;right:2.2rem;bottom:2.2rem;z-index:9999;"></div>
    <div id="star-slider-container" style="position:fixed;left:1.5rem;bottom:1.5rem;z-index:10;display:flex;align-items:center;gap:0.7em;background:rgba(30,34,60,0.55);backdrop-filter:blur(6px);border-radius:1em;padding:0.5em 1.1em 0.5em 1em;box-shadow:0 2px 12px #0002;">
      <span style="font-size:1.1em;color:#a29bfe;">★</span>
      <input id="star-slider" type="range" min="50" max="700" value="350" style="accent-color:#a29bfe;width:110px;vertical-align:middle;">
      <span id="star-slider-value" style="font-size:1em;color:#fff;min-width:2.5em;text-align:right;">350</span>
    </div>
    <div id="mini-music-player" style="position:fixed;right:1.5rem;bottom:5.5rem;z-index:20;min-width:220px;max-width:320px;background:rgba(20,24,40,0.8);backdrop-filter:blur(12px);border-radius:1em;box-shadow:0 8px 32px rgba(0,0,0,0.2);padding:1.2em;display:flex;flex-direction:column;align-items:flex-start;gap:0.5em;border:1px solid rgba(255,255,255,0.1);">
      <div style="font-size:1.1em;font-weight:700;color:#a29bfe;text-shadow:0 0 20px rgba(162,155,254,0.3);" id="mini-music-title">Loading...</div>
      <div style="font-size:0.95em;color:#fff;opacity:0.8;" id="mini-music-artist"></div>
      <div style="width:100%;height:3px;background:rgba(162,155,254,0.1);border-radius:2px;margin:0.5em 0;cursor:pointer;position:relative;" id="mini-progress-container">
        <div style="height:100%;background:#a29bfe;border-radius:2px;width:0;transition:width 0.1s linear;" id="mini-progress-bar"></div>
      </div>
      <div style="display:flex;justify-content:space-between;width:100%;font-size:0.8em;color:rgba(255,255,255,0.6);">
        <span id="mini-current-time">0:00</span>
        <span id="mini-total-time">0:00</span>
      </div>
      <div style="display:flex;gap:0.7em;margin-top:0.2em;align-items:center;flex-wrap:wrap;">
        <button id="mini-prev-btn" style="background:rgba(162,155,254,0.1);border:1px solid rgba(162,155,254,0.2);color:#a29bfe;font-size:1.1em;cursor:pointer;border-radius:8px;padding:0.4em 0.8em;transition:all 0.3s ease;">⏮</button>
        <button id="mini-play-btn" style="background:rgba(162,155,254,0.1);border:1px solid rgba(162,155,254,0.2);color:#a29bfe;font-size:1.1em;cursor:pointer;border-radius:8px;padding:0.4em 0.8em;transition:all 0.3s ease;">▶</button>
        <button id="mini-next-btn" style="background:rgba(162,155,254,0.1);border:1px solid rgba(162,155,254,0.2);color:#a29bfe;font-size:1.1em;cursor:pointer;border-radius:8px;padding:0.4em 0.8em;transition:all 0.3s ease;">⏭</button>
        <div style="display:flex;align-items:center;gap:0.5em;padding:0.4em 0.8em;background:rgba(162,155,254,0.1);border-radius:8px;border:1px solid rgba(162,155,254,0.2);">
          <span style="color:#a29bfe;font-size:0.9em;">🔊</span>
          <input type="range" id="mini-volume-slider" min="0" max="100" value="100" style="accent-color:#a29bfe;width:80px;vertical-align:middle;">
        </div>
      </div>
    </div>
    <style>
    #toast {
      display: none;
      position: fixed;
      right: 2.2rem;
      bottom: 2.2rem;
      z-index: 9999;
      background: #2d4732;
      color: #fff;
      padding: 0.7em 1.5em;
      border-radius: 1em;
      font-weight: 700;
      box-shadow: 0 2px 12px #2ecc4044;
      font-size: 1.1em;
      transition: opacity 0.45s cubic-bezier(.4,0,.2,1), transform 0.45s cubic-bezier(.4,0,.2,1);
      opacity: 0;
      transform: translateY(30px);
      pointer-events: none;
      min-width: 180px;
      text-align: center;
    }
    #toast.toast-show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    #toast.toast-hide {
      opacity: 0;
      transform: translateY(30px);
    }
    </style>
    <script src="stars.js"></script>
    <script>
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.innerHTML = '<span style="font-size:1.3em;vertical-align:middle;">✅</span> <span style="margin-left:0.5em;vertical-align:middle;">'+msg+'</span>';
      toast.className = 'toast-show';
      toast.style.display = 'block';
      setTimeout(() => {
        toast.className = 'toast-show toast-hide';
        setTimeout(() => { toast.style.display = 'none'; toast.className = ''; }, 500);
      }, 1500);
    }
    document.getElementById('discord-copy-btn').onclick = function() {
      navigator.clipboard.writeText('pigeo_on2').then(function() {
        showToast('discord id copied!');
      });
    };
    document.getElementById('star-slider').addEventListener('input', function(e) {
      const val = +e.target.value;
      window.setStarCount(val);
      document.getElementById('star-slider-value').textContent = val;
    });
    // YouTube IFrame API loader
    let miniTag = document.createElement('script');
    miniTag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(miniTag);
    // Parse songs.txt (hardcoded for now)
    const miniSongRaw = `https://youtu.be/g5HQFrSk4OA / モンダイナイトリッパー！ / 名取さな\nhttps://youtu.be/QptGSJ06d74 / Aether Crest: Celestial / void (Mournfinale) × 水野健治`;
    const miniSongList = miniSongRaw.trim().split('\n').map(line => {
      const [url, title, artist] = line.split(' / ').map(s => s.trim());
      return { url, title, artist };
    });
    let miniCurrent = 0;
    let miniPlayer;
    let miniPlaying = false;
    let miniProgressInterval;

    function formatMiniTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      seconds = Math.floor(seconds % 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function updateMiniProgress() {
      if (!miniPlayer) return;
      const currentTime = miniPlayer.getCurrentTime();
      const duration = miniPlayer.getDuration();
      const progress = (currentTime / duration) * 100;
      document.getElementById('mini-progress-bar').style.width = `${progress}%`;
      document.getElementById('mini-current-time').textContent = formatMiniTime(currentTime);
      document.getElementById('mini-total-time').textContent = formatMiniTime(duration);
    }

    function startMiniProgressUpdate() {
      if (miniProgressInterval) clearInterval(miniProgressInterval);
      miniProgressInterval = setInterval(updateMiniProgress, 1000);
    }

    function miniSeekTo(e) {
      if (!miniPlayer) return;
      const rect = e.target.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const percentage = x / rect.width;
      const duration = miniPlayer.getDuration();
      miniPlayer.seekTo(duration * percentage);
    }

    function getMiniYoutubeId(url) {
      const match = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/))([\w-]{11})/);
      return match ? match[1] : null;
    }
    function updateMiniTitle() {
      document.getElementById('mini-music-title').textContent = miniSongList[miniCurrent].title || miniSongList[miniCurrent].url;
      document.getElementById('mini-music-artist').textContent = miniSongList[miniCurrent].artist || '';
    }
    function createMiniPlayer(vid) {
      miniPlayer = new YT.Player('mini-music-yt', {
        height: '0', width: '0', videoId: vid,
        playerVars: { 'autoplay': 1, 'controls': 0 },
        events: {
          'onReady': () => {
            miniPlaying = true;
            document.getElementById('mini-play-btn').textContent = '■';
            miniPlayer.mute();
            miniPlayer.setVolume(document.getElementById('mini-volume-slider').value);
            startMiniProgressUpdate();
          },
          'onStateChange': (e) => {
            if (e.data === YT.PlayerState.ENDED) miniNextSong();
          }
        }
      });
    }
    function miniPlayPause() {
      if (!miniPlayer) return;
      if (miniPlaying) {
        miniPlayer.pauseVideo();
        miniPlaying = false;
        document.getElementById('mini-play-btn').textContent = '▶';
        clearInterval(miniProgressInterval);
      } else {
        miniPlayer.playVideo();
        miniPlaying = true;
        document.getElementById('mini-play-btn').textContent = '■';
        startMiniProgressUpdate();
      }
    }
    function loadMiniSong(idx) {
      miniCurrent = idx;
      updateMiniTitle();
      const vid = getMiniYoutubeId(miniSongList[miniCurrent].url);
      if (miniPlayer) {
        miniPlayer.loadVideoById(vid);
        miniPlaying = true;
        document.getElementById('mini-play-btn').textContent = '■';
        startMiniProgressUpdate();
      } else {
        createMiniPlayer(vid);
      }
    }
    function miniNextSong() {
      loadMiniSong((miniCurrent + 1) % miniSongList.length);
    }
    function miniPrevSong() {
      loadMiniSong((miniCurrent - 1 + miniSongList.length) % miniSongList.length);
    }
    document.getElementById('mini-play-btn').onclick = function() {
      miniPlayPause();
      if (miniPlayer && miniPlayer.isMuted()) miniPlayer.unMute();
    };
    document.getElementById('mini-next-btn').onclick = miniNextSong;
    document.getElementById('mini-prev-btn').onclick = miniPrevSong;
    document.getElementById('mini-progress-container').addEventListener('click', miniSeekTo);
    window.onYouTubeIframeAPIReady = function() {
      if (!window._mainMusicLoaded) {
        window._mainMusicLoaded = true;
        loadMiniSong(miniCurrent);
      }
    };
    updateMiniTitle();
    document.getElementById('mini-volume-slider').addEventListener('input', function(e) {
      if (miniPlayer) {
        miniPlayer.setVolume(e.target.value);
        if (miniPlayer.isMuted()) miniPlayer.unMute();
      }
    });
    </script>
</body>
</html> 